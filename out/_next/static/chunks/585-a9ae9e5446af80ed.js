"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[585],{9320:(e,t,r)=>{r.d(t,{$:()=>s});var i=r(16042),n=r(69114),o=r(65364);let a=o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID?{apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:o.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID}:void 0,l=a?(0,i.Wp)(a):void 0;(0,n.TT)().then(e=>{e&&l&&(0,n.P5)(l)});let s=async(e,t)=>{if("localhost"===window.location.hostname||!await (0,n.TT)()||!l)return;let r=(0,n.P5)(l);(0,n.$s)(r,e,t)}},18259:(e,t,r)=>{r.d(t,{A:()=>v});var i=r(37876),n=r(98594),o=r(31084),a=r(9227),l=r(77018),s=r(58862),c=r(70946),d=r(15027),u=r(54773),h=r(18978),m=r(14232);function v(e){let{min:t,max:r,label:u,value:h,setValue:v,size:f,marksFilter:p,step:w=1,infoContent:b}=e,[x,A]=(0,m.useState)(null),k=e=>{A(e.currentTarget)},S=()=>{A(null)};return(0,i.jsxs)(o.A,{container:!0,justifyContent:"center",alignItems:"center",size:null!=f?f:11,children:[(0,i.jsxs)(a.A,{direction:"row",width:"100%",children:[(0,i.jsx)(l.A,{id:"input-".concat(u),variant:"body2",children:1===w&&p?u:"".concat(u,": ").concat(h)}),!!b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.x,{onClickAway:S,children:(0,i.jsx)(c.A,{size:"medium","aria-owns":x?"mouse-over-popover":void 0,"aria-haspopup":"true",onClick:k,onMouseEnter:k,onMouseLeave:S,sx:{ml:1,padding:0},"aria-label":"Help about number of threads",children:(0,i.jsx)(n.In,{icon:"mdi:info-outline",width:"1.1rem"})})}),(0,i.jsx)(d.Ay,{id:"mouse-over-popover",open:!!x,anchorEl:x,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{pointerEvents:"none"},disableRestoreFocus:!0,children:(0,i.jsx)(l.A,{variant:"body2",sx:{padding:2,maxWidth:500},children:b})})]})]}),(0,i.jsx)(g,{min:t,max:r,marks:p?Array.from({length:r-t+1},(e,r)=>({value:r+t,label:"".concat(r+t)})).filter((e,t)=>t%p==0):void 0,step:w,valueLabelDisplay:"off",value:h,onChange:(e,t)=>v(t),"aria-labelledby":"input-".concat(u)})]})}let g=(0,u.Ay)(h.Ay)(()=>({".MuiSlider-markLabel":{fontSize:"0.8rem",lineHeight:"0.8rem"},".MuiSlider-thumb":{width:"18px",height:"18px"},marginBottom:"1rem"}))},19410:(e,t,r)=>{r.d(t,{h:()=>P});var i=r(37876),n=r(11494),o=r(31084),a=r(57065),l=r(99542),s=r(85278),c=r(65897),d=r(14232),u=r(19271),h=r(54587),m=r.n(h),v=r(92094),g=r(99509);let f={position:"absolute",width:"100%",height:"100%",backgroundColor:"#eb6150",opacity:"0.8"},p={position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,.14)",padding:"35%",backgroundClip:"content-box",borderRadius:"50%",boxSizing:"border-box"},w=e=>({position:"absolute",width:"100%",height:"100%",backgroundColor:e?v.k_[e]:"#fad541",opacity:.5});var b=r(77018),x=r(24307);function A(e){let{height:t,boardOrientation:r,currentPositionAtom:a=(0,l.eU)({})}=e,[c,h]=(0,d.useState)({whiteBarPercentage:50,label:"0.0"}),m=(0,s.md)(a);return(0,d.useEffect)(()=>{var e;let t=null==m?void 0:null===(e=m.eval)||void 0===e?void 0:e.lines[0];m.eval&&t&&!(t.depth<6)&&h((0,x.nY)(m.eval))},[m]),(0,i.jsxs)(o.A,{container:!0,justifyContent:"center",alignItems:"center",width:"2rem",height:t,border:"1px solid black",borderRadius:"5px",children:[(0,i.jsx)(n.A,{sx:{backgroundColor:r===u.Q1.White?"#424242":"white",transition:"height 1s"},height:"".concat(r===u.Q1.White?100-c.whiteBarPercentage:c.whiteBarPercentage,"%"),width:"100%",borderRadius:100===c.whiteBarPercentage?"5px":"5px 5px 0 0",children:(0,i.jsx)(b.A,{color:r===u.Q1.White?"white":"black",textAlign:"center",width:"100%",children:c.whiteBarPercentage<50&&r===u.Q1.White||c.whiteBarPercentage>=50&&r===u.Q1.Black?c.label:""})}),(0,i.jsx)(n.A,{sx:{backgroundColor:r===u.Q1.White?"white":"#424242",transition:"height 1s"},height:"".concat(r===u.Q1.White?c.whiteBarPercentage:100-c.whiteBarPercentage,"%"),width:"100%",display:"flex",alignItems:"flex-end",borderRadius:100===c.whiteBarPercentage?"5px":"0 0 5px 5px",children:(0,i.jsx)(b.A,{color:r===u.Q1.White?"black":"white",textAlign:"center",width:"100%",children:c.whiteBarPercentage>=50&&r===u.Q1.White||c.whiteBarPercentage<50&&r===u.Q1.Black?c.label:""})})]})}var k=r(9227),S=r(24422);function E(e){let{fen:t,color:r}=e,n=(0,d.useMemo)(()=>(0,x.Kz)(t,r).map(e=>{let{piece:t,count:r}=e;return j(t,r)}),[t,r]),a=(0,d.useMemo)(()=>{let e=(0,x.LR)(t);return r===u.Q1.White?e:-e},[t,r]);return(0,i.jsxs)(o.A,{container:!0,alignItems:"end",spacing:.7,size:"auto",marginLeft:"-".concat(.165,"rem"),children:[(0,i.jsx)(k.A,{direction:"row",spacing:.1,children:n}),a>0&&(0,i.jsxs)(b.A,{lineHeight:"".concat(.8250000000000001,"rem"),fontSize:"".concat(.8250000000000001,"rem"),marginLeft:.3,children:["+",a]})]})}let j=(e,t)=>t?(0,i.jsx)(k.A,{direction:"row",spacing:"-".concat(.66,"rem"),children:Array(t).fill(0).map((t,r)=>(0,i.jsx)(n.A,{width:"".concat(1.1,"rem"),height:"".concat(1.1,"rem"),sx:{backgroundImage:"url(/piece/cardinal/".concat(e,".svg)"),backgroundRepeat:"no-repeat"}},"".concat(e,"-").concat(r)))},e):null;var C=r(658);function I(e){let{color:t,player:r,gameAtom:n}=e,a=(0,s.md)(n),l=a.fen(),c=(0,d.useMemo)(()=>{if(a.turn()===t){var e,r;let t=null===(e=a.history({verbose:!0}).at(-1))||void 0===e?void 0:e.before;return _(null===(r=a.getComments().find(e=>{let{fen:r}=e;return r===t}))||void 0===r?void 0:r.comment)}return _(a.getComment())},[a,t]);return(0,i.jsxs)(o.A,{container:!0,justifyContent:"space-between",alignItems:"center",size:12,children:[(0,i.jsxs)(k.A,{direction:"row",children:[(0,i.jsx)(S.A,{src:r.avatarUrl,alt:r.name,variant:"circular",sx:{width:40,height:40,backgroundColor:t===u.Q1.White?"white":"black",color:t===u.Q1.White?"black":"white",border:"1px solid black"},children:r.name[0].toUpperCase()}),(0,i.jsxs)(k.A,{marginLeft:1,children:[(0,i.jsxs)(k.A,{direction:"row",children:[(0,i.jsx)(b.A,{fontSize:"0.9rem",children:r.name}),r.rating&&(0,i.jsxs)(b.A,{marginLeft:.5,fontSize:"0.9rem",fontWeight:"200",children:["(",r.rating,")"]})]}),(0,i.jsx)(E,{fen:l,color:t})]})]}),c&&(0,i.jsxs)(b.A,{align:"center",sx:{backgroundColor:t===u.Q1.White?"white":"black",color:t===u.Q1.White?"black":"white"},borderRadius:"5px",padding:.8,border:"1px solid #424242",width:"5rem",textAlign:"right",children:[c.hours?"".concat(c.hours,":"):"",(0,C.Yn)(c.minutes),":",(0,C.Yn)(c.seconds),c.hours||c.minutes||c.seconds>20?"":".".concat(c.tenths)]})]})}let _=e=>{if(!e)return;let t=e.match(/\[%clk (\d+):(\d+):(\d+)(?:\.(\d*))?\]/);if(t)return{hours:parseInt(t[1]),minutes:parseInt(t[2]),seconds:parseInt(t[3]),tenths:t[4]?parseInt(t[4]):0}};var B=r(62465);function P(e){var t;let{id:r,canPlay:h,gameAtom:b,boardSize:x,whitePlayer:k,blackPlayer:S,boardOrientation:E=u.Q1.White,currentPositionAtom:j=(0,l.eU)({}),showBestMoveArrow:C=!1,showPlayerMoveIconAtom:_,showEvaluationBar:P=!1}=e,Q=(0,d.useRef)(null),R=(0,s.md)(b),{playMove:z}=(0,c.j)(b),W=(0,d.useMemo)(()=>(0,l.eU)([]),[]),M=(0,s.Xr)(W),L=(0,d.useMemo)(()=>(0,l.eU)([]),[]),T=(0,s.Xr)(L),U=(0,s.md)(j),[N,D]=(0,d.useState)(!1),[K,O]=(0,d.useState)(null),[F,H]=(0,d.useState)(null),q=(0,s.md)(g._),X=(0,s.md)(g.U),G=R.fen();(0,d.useEffect)(()=>{M([])},[G,M]);let J=(0,d.useCallback)(e=>{let{piece:t}=e;return!R.isGameOver()&&!!h&&(!0===h||h===t[0])},[h,R]),Y=(0,d.useCallback)((e,t,r)=>{var i,n;return!!J({piece:r})&&!!z({from:e,to:t,promotion:null!==(n=null===(i=r[1])||void 0===i?void 0:i.toLowerCase())&&void 0!==n?n:"q"})},[J,z]),$=(0,d.useCallback)(e=>{O(null!=e?e:null),H(null),D(!1),e?T(R.moves({square:e,verbose:!0}).map(e=>e.to)):T([])},[O,H,T,R]),V=(0,d.useCallback)((e,t)=>{if(M([]),!K){if(t&&!J({piece:t}))return;$(e);return}let r=R.moves({square:K,verbose:!0}).find(t=>t.to===e);if(!r){$(e);return}if(H(e),"p"===r.piece&&("w"===r.color&&"8"===e[1]||"b"===r.color&&"1"===e[1])){D(!0);return}$(z({from:K,to:e})?void 0:e)},[R,J,K,z,$,M]),Z=(0,d.useCallback)(e=>{M(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[M]),ee=(0,d.useCallback)((e,t)=>{$(t)},[$]),et=(0,d.useCallback)(()=>{$()},[$]),er=(0,d.useCallback)((e,t,r)=>{var i,n;if(!e)return!1;let o=null!==(n=null===(i=e[1])||void 0===i?void 0:i.toLowerCase())&&void 0!==n?n:"q";if(K&&F){let e=z({from:K,to:F,promotion:o});return $(),!!e}if(t&&r){let e=z({from:t,to:r,promotion:o});return $(),!!e}return $(K),!1},[K,F,z,$]),ei=(0,d.useMemo)(()=>{var e,t;let r=null==U?void 0:null===(e=U.lastEval)||void 0===e?void 0:e.bestMove,i=null==U?void 0:null===(t=U.eval)||void 0===t?void 0:t.moveClassification;return r&&C&&i!==u.eK.Best&&i!==u.eK.Opening&&i!==u.eK.Forced&&i!==u.eK.Perfect?[[r.slice(0,2),r.slice(2,4),(0,B.A)(v.k_[u.eK.Best]).spin(-X).toHexString()]]:[]},[U,C,X]),en=(0,d.useMemo)(()=>(function(e){let{currentPositionAtom:t,clickedSquaresAtom:r,playableSquaresAtom:n,showPlayerMoveIconAtom:o=(0,l.eU)(!1)}=e,a=(0,d.forwardRef)((e,a)=>{var l,c,u;let{children:h,square:v,style:b}=e,x=(0,s.md)(o),A=(0,s.md)(t),k=(0,s.md)(r),S=(0,s.md)(n),E=(0,s.md)(g.U),j=null===(l=A.lastMove)||void 0===l?void 0:l.from,C=null===(c=A.lastMove)||void 0===c?void 0:c.to,I=null==A?void 0:null===(u=A.eval)||void 0===u?void 0:u.moveClassification,_=(0,d.useMemo)(()=>k.includes(v)?f:j===v||C===v?w(I):void 0,[k,v,j,C,I]),B=(0,d.useMemo)(()=>S.includes(v)?p:void 0,[S,v]);return(0,i.jsxs)("div",{ref:a,style:{...b,position:"relative",filter:E?"hue-rotate(-".concat(E,"deg)"):void 0},children:[h,_&&(0,i.jsx)("div",{style:_}),B&&(0,i.jsx)("div",{style:B}),I&&x&&v===C&&(0,i.jsx)(m(),{src:"/icons/".concat(I,".png"),alt:"move-icon",width:35,height:35,style:{position:"absolute",top:"max(-12px, -1.8vw)",right:"max(-12px, -1.8vw)",maxWidth:"3.6vw",maxHeight:"3.6vw",zIndex:100}})]})});return a.displayName="SquareRenderer",a})({currentPositionAtom:j,clickedSquaresAtom:W,playableSquaresAtom:L,showPlayerMoveIconAtom:_}),[j,W,L,_]),eo=(0,d.useMemo)(()=>y.reduce((e,t)=>(e[t]=e=>{let{squareWidth:r}=e;return(0,i.jsx)(n.A,{width:r,height:r,sx:{backgroundImage:"url(/piece/".concat(q,"/").concat(t,".svg)"),backgroundSize:"contain"}})},e),{}),[q]),ea=(0,d.useMemo)(()=>{let e={borderRadius:"5px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"};return X?{...e,filter:"hue-rotate(".concat(X,"deg)")}:e},[X]);return(0,i.jsxs)(o.A,{container:!0,justifyContent:"center",alignItems:"center",wrap:"nowrap",width:x,children:[P&&(0,i.jsx)(A,{height:(null==Q?void 0:null===(t=Q.current)||void 0===t?void 0:t.offsetHeight)||x||400,boardOrientation:E,currentPositionAtom:j}),(0,i.jsxs)(o.A,{container:!0,rowGap:1.5,justifyContent:"center",alignItems:"center",paddingLeft:2*!!P,size:"grow",children:[(0,i.jsx)(I,{color:E===u.Q1.White?u.Q1.Black:u.Q1.White,gameAtom:b,player:E===u.Q1.White?S:k}),(0,i.jsx)(o.A,{container:!0,justifyContent:"center",alignItems:"center",ref:Q,size:12,children:(0,i.jsx)(a.Ve,{id:"".concat(r,"-").concat(h),position:G,onPieceDrop:Y,boardOrientation:E===u.Q1.White?"white":"black",customBoardStyle:ea,customArrows:ei,isDraggablePiece:J,customSquare:en,onSquareClick:V,onSquareRightClick:Z,onPieceDragBegin:ee,onPieceDragEnd:et,onPromotionPieceSelect:er,showPromotionDialog:N,promotionToSquare:F,animationDuration:200,customPieces:eo})}),(0,i.jsx)(I,{color:E,gameAtom:b,player:E===u.Q1.White?k:S})]})]})}let y=["wP","wB","wN","wR","wQ","wK","bP","bB","bN","bR","bQ","bK"]},32253:(e,t,r)=>{r.d(t,{K:()=>d});var i=r(47713),n=r(24026),o=r(14679),a=r(43699),l=r(39228),s=r(19271),c=r(14232);let d=e=>{let[t,r]=(0,c.useState)(null);return(0,c.useEffect)(()=>{e&&(e===s.Qz.Stockfish11||(0,i.TH)())&&u(e).then(e=>{r(t=>(null==t||t.shutdown(),e))})},[e]),t},u=e=>{switch(e){case s.Qz.Stockfish17:return l.f.create(!1);case s.Qz.Stockfish17Lite:return l.f.create(!0);case s.Qz.Stockfish16_1:return a.m.create(!1);case s.Qz.Stockfish16_1Lite:return a.m.create(!0);case s.Qz.Stockfish16:return o.K.create(!1);case s.Qz.Stockfish16NNUE:return o.K.create(!0);case s.Qz.Stockfish11:return n.T.create()}}},37242:(e,t,r)=>{r.d(t,{v:()=>o});var i=r(85278),n=r(14232);function o(e,t){let[r,o]=(0,n.useState)(""),[a,l]=(0,i.fp)(t);return(0,n.useEffect)(()=>{var t;o(e);let r=window.localStorage.getItem(e);if(!r)return;let i="undefined"===(t=r)?void 0:JSON.parse(t);i&&l(i)},[e,l]),(0,n.useEffect)(()=>{r===e&&window.localStorage.setItem(e,JSON.stringify(a))},[e,r,a]),[a,l]}},69846:(e,t,r)=>{r.d(t,{l:()=>n});var i=r(14232);let n=()=>{var e,t,r;let[n,o]=(0,i.useState)({width:null!==(r=null===(t=document)||void 0===t?void 0:null===(e=t.querySelector(".MuiGrid2-root"))||void 0===e?void 0:e.clientWidth)&&void 0!==r?r:500,height:window?window.innerHeight-120:500});return(0,i.useEffect)(()=>{var e;let t=null===(e=document)||void 0===e?void 0:e.querySelector(".MuiGrid2-root");if(!t)return;let r=new ResizeObserver(()=>o(e=>({...e,width:t.clientWidth})));return r.observe(t),()=>{r.disconnect()}},[]),(0,i.useEffect)(()=>{let e=()=>{o(e=>({...e,height:window.innerHeight-100}))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),n}},99509:(e,t,r)=>{r.d(t,{U:()=>o,_:()=>n});var i=r(42200);let n=(0,i.tG)("pieceSet","maestro"),o=(0,i.tG)("boardHue",0)}}]);