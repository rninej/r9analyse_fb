(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[453],{2407:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(32432),s=r(64289);function n({props:e,name:t,defaultTheme:r,themeId:n}){let o=(0,s.A)(r);return n&&(o=o[n]||o),(0,i.A)({theme:o,name:t,props:e})}},20035:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(16291).Ay)()},22277:(e,t,r)=>{"use strict";r.d(t,{OS:()=>i,d$:()=>R});let i="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class s{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){let{color:r,piece:i,from:s,to:a,flags:l,captured:u,promotion:h}=t,c=S(s),d=S(a);for(let s in this.color=r,this.piece=i,this.from=c,this.to=d,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=c+d,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="",o)o[s]&l&&(this.flags+=n[s]);u&&(this.captured=u),h&&(this.promotion=h,this.lan+=h)}isCapture(){return this.flags.indexOf(n.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(n.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(n.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(n.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(n.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(n.BIG_PAWN)>-1}}let n={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},o={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},a={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},l={...a,WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},u={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},h={b:[16,32,17,15],w:[-16,-32,-17,-15]},c={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},d=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],f={p:1,n:2,b:4,r:8,q:16,k:32},_=["n","b","r","q"],g={k:o.KSIDE_CASTLE,q:o.QSIDE_CASTLE},m={w:[{square:u.a1,flag:o.QSIDE_CASTLE},{square:u.h1,flag:o.KSIDE_CASTLE}],b:[{square:u.a8,flag:o.QSIDE_CASTLE},{square:u.h8,flag:o.KSIDE_CASTLE}]},b={b:1,w:6},v=["1-0","0-1","1/2-1/2","*"];function y(e){return -1!=="0123456789".indexOf(e)}function S(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function E(e){return"w"===e?"b":"w"}function w(e,t,r,i,s,n,a=o.NORMAL){let l=i>>4;if("p"===s&&(7===l||0===l))for(let l=0;l<_.length;l++){let u=_[l];e.push({color:t,from:r,to:i,piece:s,captured:n,promotion:u,flags:a|o.PROMOTION})}else e.push({color:t,from:r,to:i,piece:s,captured:n,flags:a})}function k(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return"p"}return"o"===(t=t.toLowerCase())?"k":t}function C(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function I(e){return e.split(" ").slice(0,4).join(" ")}class R{_board=Array(128);_turn="w";_header={};_kings={w:-1,b:-1};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCount={};constructor(e=i,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:-1,b:-1},this._turn="w",this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...l},this._positionCount={},this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6&&(e=i.concat(["-","-","0","1"].slice(-(6-i.length))).join(" ")),i=e.split(/\s+/),!t){let{ok:t,error:r}=function(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let i=parseInt(t[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let s=t[0].split("/");if(8!==s.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<s.length;e++){let t=0,r=!1;for(let i=0;i<s[e].length;i++)if(y(s[e][i])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(s[e][i],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[e][i]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(s[0]+s[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw Error(r)}let s=i[0],n=0;this.clear({preserveHeaders:r});for(let e=0;e<s.length;e++){let t=s.charAt(e);if("/"===t)n+=8;else if(y(t))n+=parseInt(t,10);else{let e=t<"a"?"w":"b";this._put({type:t.toLowerCase(),color:e},S(n)),n++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=o.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=o.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=o.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=o.QSIDE_CASTLE),this._epSquare="-"===i[3]?-1:u[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){let e=0,t="";for(let r=u.a8;r<=u.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);let{color:i,type:s}=this._board[r];t+="w"===i?s.toUpperCase():s.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==u.h1&&(t+="/"),e=0,r+=8)}let r="";this._castling.w&o.KSIDE_CASTLE&&(r+="K"),this._castling.w&o.QSIDE_CASTLE&&(r+="Q"),this._castling.b&o.KSIDE_CASTLE&&(r+="k"),this._castling.b&o.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(-1!==this._epSquare){let e=this._epSquare+("w"===this._turn?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type==="p"){this._makeMove({color:e,from:t,to:this._epSquare,piece:"p",captured:"p",flags:o.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){i=S(this._epSquare);break}}}}return[t,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==i?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(i)}get(e){return this._board[u[e]]}findPiece(e){let t=[];for(let r=u.a8;r<=u.h1;r++){if(136&r){r+=7;continue}this._board[r]&&this._board[r]?.color===e.color&&this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(S(r))}return t}put({type:e,color:t},r){return!!this._put({type:e,color:t},r)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in u))return!1;let i=u[r];if("k"==e&&-1!=this._kings[t]&&this._kings[t]!=i)return!1;let s=this._board[i];return s&&"k"===s.type&&(this._kings[s.color]=-1),this._board[i]={type:e,color:t},"k"===e&&(this._kings[t]=i),!0}remove(e){let t=this.get(e);return delete this._board[u[e]],t&&"k"===t.type&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){let e=this._board[u.e1]?.type==="k"&&this._board[u.e1]?.color==="w",t=this._board[u.e8]?.type==="k"&&this._board[u.e8]?.color==="b";e&&this._board[u.a1]?.type==="r"&&this._board[u.a1]?.color==="w"||(this._castling.w&=~o.QSIDE_CASTLE),e&&this._board[u.h1]?.type==="r"&&this._board[u.h1]?.color==="w"||(this._castling.w&=~o.KSIDE_CASTLE),t&&this._board[u.a8]?.type==="r"&&this._board[u.a8]?.color==="b"||(this._castling.b&=~o.QSIDE_CASTLE),t&&this._board[u.h8]?.type==="r"&&this._board[u.h8]?.color==="b"||(this._castling.b&=~o.KSIDE_CASTLE)}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+("w"===this._turn?-16:16),t=this._epSquare+("w"===this._turn?16:-16);if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==E(this._turn)||this._board[t]?.type!=="p"){this._epSquare=-1;return}[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type==="p")||(this._epSquare=-1)}_attacked(e,t,r){let i=[];for(let s=u.a8;s<=u.h1;s++){if(136&s){s+=7;continue}if(void 0===this._board[s]||this._board[s].color!==e)continue;let n=this._board[s],o=s-t;if(0===o)continue;let a=o+119;if(d[a]&f[n.type]){if("p"===n.type){if(o>0&&"w"===n.color||o<=0&&"b"===n.color){if(!r)return!0;i.push(S(s))}continue}if("n"===n.type||"k"===n.type){if(!r)return!0;i.push(S(s));continue}let e=p[a],l=s+e,u=!1;for(;l!==t;){if(null!=this._board[l]){u=!0;break}l+=e}if(!u){if(!r)return!0;i.push(S(s));continue}}}return!!r&&i}attackers(e,t){return t?this._attacked(t,u[e],!0):this._attacked(this._turn,u[e],!0)}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(E(e),t)}isAttacked(e,t){return this._attacked(t,u[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,i=0;for(let s=u.a8;s<=u.h1;s++){if(i=(i+1)%2,136&s){s+=7;continue}let n=this._board[s];n&&(e[n.type]=n.type in e?e[n.type]+1:1,"b"===n.type&&t.push(i),r++)}if(2===r||3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){let e=0,r=t.length;for(let i=0;i<r;i++)e+=t[i];if(0===e||e===r)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let i=this._moves({square:t,piece:r});return e?i.map(e=>new s(this,e)):i.map(e=>this._moveToSan(e,i))}_moves({legal:e=!0,piece:t,square:r}={}){let i=r?r.toLowerCase():void 0,s=t?.toLowerCase(),n=[],a=this._turn,l=E(a),d=u.a8,p=u.h1,f=!1;if(i){if(!(i in u))return[];d=p=u[i],f=!0}for(let e=d;e<=p;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===l)continue;let{type:r}=this._board[e];if("p"===r){if(s&&s!==r)continue;t=e+h[a][0],!this._board[t]&&(w(n,a,e,t,"p"),t=e+h[a][1],b[a]===e>>4&&!this._board[t]&&w(n,a,e,t,"p",void 0,o.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+h[a][r])||(this._board[t]?.color===l?w(n,a,e,t,"p",this._board[t].type,o.CAPTURE):t===this._epSquare&&w(n,a,e,t,"p","p",o.EP_CAPTURE))}else{if(s&&s!==r)continue;for(let i=0,s=c[r].length;i<s;i++){let s=c[r][i];for(t=e;!(136&(t+=s));){if(this._board[t]){if(this._board[t].color===a)break;w(n,a,e,t,r,this._board[t].type,o.CAPTURE);break}if(w(n,a,e,t,r),"n"===r||"k"===r)break}}}}if((void 0===s||"k"===s)&&(!f||p===this._kings[a])){if(this._castling[a]&o.KSIDE_CASTLE){let e=this._kings[a],t=e+2;this._board[e+1]||this._board[t]||this._attacked(l,this._kings[a])||this._attacked(l,e+1)||this._attacked(l,t)||w(n,a,this._kings[a],t,"k",void 0,o.KSIDE_CASTLE)}if(this._castling[a]&o.QSIDE_CASTLE){let e=this._kings[a],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(l,this._kings[a])||this._attacked(l,e-1)||this._attacked(l,t)||w(n,a,this._kings[a],t,"k",void 0,o.QSIDE_CASTLE)}}if(!e||-1===this._kings[a])return n;let _=[];for(let e=0,t=n.length;e<t;e++)this._makeMove(n[e]),this._isKingAttacked(a)||_.push(n[e]),this._undoMove();return _}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if("object"==typeof e){let t=this._moves();for(let i=0,s=t.length;i<s;i++)if(e.from===S(t[i].from)&&e.to===S(t[i].to)&&(!("promotion"in t[i])||e.promotion===t[i].promotion)){r=t[i];break}}if(!r){if("string"==typeof e)throw Error(`Invalid move: ${e}`);throw Error(`Invalid move: ${JSON.stringify(e)}`)}let i=new s(this,r);return this._makeMove(r),this._incPositionCount(i.after),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){let t=this._turn,r=E(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&o.EP_CAPTURE&&("b"===this._turn?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),"k"===this._board[e.to].type){if(this._kings[t]=e.to,e.flags&o.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._board[t]=this._board[r],delete this._board[r]}else if(e.flags&o.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._board[t]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let r=0,i=m[t].length;r<i;r++)if(e.from===m[t][r].square&&this._castling[t]&m[t][r].flag){this._castling[t]^=m[t][r].flag;break}}if(this._castling[r]){for(let t=0,i=m[r].length;t<i;t++)if(e.to===m[r][t].square&&this._castling[r]&m[r][t].flag){this._castling[r]^=m[r][t].flag;break}}e.flags&o.BIG_PAWN?"b"===t?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=-1,"p"===e.piece?this._halfMoves=0:e.flags&(o.CAPTURE|o.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,"b"===t&&this._moveNumber++,this._turn=r}undo(){let e=this._undoMove();if(e){let t=new s(this,e);return this._decPositionCount(t.after),t}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;let r=this._turn,i=E(r);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured){if(t.flags&o.EP_CAPTURE){let e;e="b"===r?t.to-16:t.to+16,this._board[e]={type:"p",color:i}}else this._board[t.to]={type:t.captured,color:i}}if(t.flags&(o.KSIDE_CASTLE|o.QSIDE_CASTLE)){let e,r;t.flags&o.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._board[e]=this._board[r],delete this._board[r]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],i=!1;for(let t in this._header)this._header[t]&&r.push(`[${t} "${this._header[t]}"]`+e),i=!0;i&&this._history.length&&r.push(e);let s=e=>{let t=this._comments[this.fen()];if(void 0!==t){let r=e.length>0?" ":"";e=`${e}${r}{${t}}`}return e},n=[];for(;this._history.length>0;)n.push(this._undoMove());let o=[],a="";for(0===n.length&&o.push(s(""));n.length>0;){a=s(a);let e=n.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&o.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&o.push(s(a)),o.push(this._header.Result||"*"),0===t)return r.join("")+o.join(" ");let l=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=0;for(let i=0;i<o.length;i++){if(u+o[i].length>t&&o[i].includes("{")){u=function(i,s){for(let n of s.split(" "))if(n){if(i+n.length>t){for(;l();)i--;r.push(e),i=0}r.push(n),i+=n.length,r.push(" "),i++}return l()&&i--,i}(u,o[i]);continue}u+o[i].length>t&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(e),u=0):0!==i&&(r.push(" "),u++),r.push(o[i]),u+=o[i].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??a[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=a[e]||null,!0)}getHeaders(){let e={};for(let[t,r]of Object.entries(this._header))null!==r&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){function i(e){return e.replace(/\\/g,"\\")}e=e.trim();let s=RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)").exec(e),n=s&&s.length>=2?s[1]:"";this.reset();let o=function(e){let t={},s=e.split(new RegExp(i(r))),n="",o="";for(let e=0;e<s.length;e++){let r=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;n=s[e].replace(r,"$1"),o=s[e].replace(r,"$2"),n.trim().length>0&&(t[n]=o)}return t}(n),a="";for(let e in o)"fen"===e.toLowerCase()&&(a=o[e]),this.header(e,o[e]);if(t){if("1"===o.SetUp){if(!("FEN"in o))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}}else a&&this.load(a,{preserveHeaders:!0});let l=function(e){return e=e.replace(RegExp(i(r),"g")," "),`{${Array.from(e.slice(1,e.length-1)).map(function(e){return 128>e.charCodeAt(0)?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()}).join("")}}`},u=e.replace(n,"").replace(RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(e,t,r){return void 0!==t?l(t):" "+l(`{${r.slice(1)}}`)}).replace(RegExp(i(r),"g")," "),h=/(\([^()]+\))+?/g;for(;h.test(u);)u=u.replace(h,"");let c=(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));c=c.filter(e=>""!==e);let d="";for(let e=0;e<c.length;e++){let r=function(e){if(e.startsWith("{")&&e.endsWith("}")){var t;return 0==(t=e.slice(1,e.length-1)).length?"":decodeURIComponent("%"+(t.match(/.{1,2}/g)||[]).join("%"))}}(c[e]);if(void 0!==r){this._comments[this.fen()]=r;continue}let i=this._moveFromSan(c[e],t);if(null==i){if(v.indexOf(c[e])>-1)d=c[e];else throw Error(`Invalid move in PGN: ${c[e]}`)}else d="",this._makeMove(i),this._incPositionCount(this.fen())}d&&Object.keys(this._header).length&&this._header.Result!==d&&this.setHeader("Result",d)}_moveToSan(e,t){let r="";if(e.flags&o.KSIDE_CASTLE)r="O-O";else if(e.flags&o.QSIDE_CASTLE)r="O-O-O";else{if("p"!==e.piece){let i=function(e,t){let r=e.from,i=e.to,s=e.piece,n=0,o=0,a=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,u=t[e].to;s===t[e].piece&&r!==l&&i===u&&(n++,r>>4==l>>4&&o++,(15&r)==(15&l)&&a++)}return n>0?o>0&&a>0?S(r):a>0?S(r).charAt(1):S(r).charAt(0):""}(e,t);r+=e.piece.toUpperCase()+i}e.flags&(o.CAPTURE|o.EP_CAPTURE)&&("p"===e.piece&&(r+=S(e.from)[0]),r+="x"),r+=S(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r,i,s,n,o;let a=C(e),l=k(a),h=this._moves({legal:!0,piece:l});for(let e=0,t=h.length;e<t;e++)if(a===C(this._moveToSan(h[e],h)))return h[e];if(t)return null;let c=!1;if((i=a.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(r=i[1],s=i[2],n=i[3],o=i[4],1==s.length&&(c=!0)):(i=a.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(r=i[1],s=i[2],n=i[3],o=i[4],1==s.length&&(c=!0)),l=k(a),h=this._moves({legal:!0,piece:r||l}),!n)return null;for(let e=0,t=h.length;e<t;e++)if(s){if((!r||r.toLowerCase()==h[e].piece)&&u[s]==h[e].from&&u[n]==h[e].to&&(!o||o.toLowerCase()==h[e].promotion))return h[e];if(c){let t=S(h[e].from);if((!r||r.toLowerCase()==h[e].piece)&&u[n]==h[e].to&&(s==t[0]||s==t[1])&&(!o||o.toLowerCase()==h[e].promotion))return h[e]}}else if(a===C(this._moveToSan(h[e],h)).replace("x",""))return h[e];return null}ascii(){let e="   +------------------------+\n";for(let t=u.a8;t<=u.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type;e+=" "+("w"===this._board[t].color?r.toUpperCase():r.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,i=this._turn;for(let s=0,n=t.length;s<n;s++)this._makeMove(t[s]),!this._isKingAttacked(i)&&(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}turn(){return this._turn}board(){let e=[],t=[];for(let r=u.a8;r<=u.h1;r++)null==this._board[r]?t.push(null):t.push({square:S(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in u){let t=u[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let i=t.pop();if(!i)break;e?r.push(new s(this,i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){let t=I(e);return this._positionCount[t]||0}_incPositionCount(e){let t=I(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){let t=I(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of["k","q"])void 0!==t[r]&&(t[r]?this._castling[e]|=g[r]:this._castling[e]&=~g[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return(void 0===t.k||t.k===r.k)&&(void 0===t.q||t.q===r.q)}getCastlingRights(e){return{k:(this._castling[e]&g.k)!=0,q:(this._castling[e]&g.q)!=0}}moveNumber(){return this._moveNumber}}},31084:(e,t,r)=>{"use strict";r.d(t,{A:()=>N});var i=r(14232),s=r(69241),n=r(72311),o=r(45879),a=r(4697),l=r(20035),u=r(2407),h=r(64289),c=r(90809),d=r(89856);let p=(e,t)=>e.filter(e=>t.includes(e)),f=(e,t,r)=>{let i=e.keys[0];Array.isArray(t)?t.forEach((t,i)=>{r((t,r)=>{i<=e.keys.length-1&&(0===i?Object.assign(t,r):t[e.up(e.keys[i])]=r)},t)}):t&&"object"==typeof t?(Object.keys(t).length>e.keys.length?e.keys:p(e.keys,Object.keys(t))).forEach(s=>{if(e.keys.includes(s)){let n=t[s];void 0!==n&&r((t,r)=>{i===s?Object.assign(t,r):t[e.up(s)]=r},n)}}):("number"==typeof t||"string"==typeof t)&&r((e,t)=>{Object.assign(e,t)},t)};function _(e){return`--Grid-${e}Spacing`}function g(e){return`--Grid-parent-${e}Spacing`}let m="--Grid-columns",b="--Grid-parent-columns",v=({theme:e,ownerState:t})=>{let r={};return f(e.breakpoints,t.size,(e,t)=>{let i={};"grow"===t&&(i={flexBasis:0,flexGrow:1,maxWidth:"100%"}),"auto"===t&&(i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),"number"==typeof t&&(i={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${t} / var(${b}) - (var(${b}) - ${t}) * (var(${g("column")}) / var(${b})))`}),e(r,i)}),r},y=({theme:e,ownerState:t})=>{let r={};return f(e.breakpoints,t.offset,(e,t)=>{let i={};"auto"===t&&(i={marginLeft:"auto"}),"number"==typeof t&&(i={marginLeft:0===t?"0px":`calc(100% * ${t} / var(${b}) + var(${g("column")}) * ${t} / var(${b}))`}),e(r,i)}),r},S=({theme:e,ownerState:t})=>{if(!t.container)return{};let r={[m]:12};return f(e.breakpoints,t.columns,(e,t)=>{let i=t??12;e(r,{[m]:i,"> *":{[b]:i}})}),r},E=({theme:e,ownerState:t})=>{if(!t.container)return{};let r={};return f(e.breakpoints,t.rowSpacing,(t,i)=>{let s="string"==typeof i?i:e.spacing?.(i);t(r,{[_("row")]:s,"> *":{[g("row")]:s}})}),r},w=({theme:e,ownerState:t})=>{if(!t.container)return{};let r={};return f(e.breakpoints,t.columnSpacing,(t,i)=>{let s="string"==typeof i?i:e.spacing?.(i);t(r,{[_("column")]:s,"> *":{[g("column")]:s}})}),r},k=({theme:e,ownerState:t})=>{if(!t.container)return{};let r={};return f(e.breakpoints,t.direction,(e,t)=>{e(r,{flexDirection:t})}),r},C=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&"wrap"!==e.wrap&&{flexWrap:e.wrap},gap:`var(${_("row")}) var(${_("column")})`}}),I=e=>{let t=[];return Object.entries(e).forEach(([e,r])=>{!1!==r&&void 0!==r&&t.push(`grid-${e}-${String(r)}`)}),t},R=(e,t="xs")=>{function r(e){return void 0!==e&&("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e&&e>0)}if(r(e))return[`spacing-${t}-${String(e)}`];if("object"==typeof e&&!Array.isArray(e)){let t=[];return Object.entries(e).forEach(([e,i])=>{r(i)&&t.push(`spacing-${e}-${String(i)}`)}),t}return[]},T=e=>void 0===e?[]:"object"==typeof e?Object.entries(e).map(([e,t])=>`direction-${e}-${t}`):[`direction-xs-${String(e)}`];var x=r(37876);let A=(0,d.A)(),O=(0,l.A)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function L(e){return(0,u.A)({props:e,name:"MuiGrid",defaultTheme:A})}var P=r(54773),D=r(52196),M=r(30566);let N=function(e={}){let{createStyledComponent:t=O,useThemeProps:r=L,useTheme:l=h.A,componentName:u="MuiGrid"}=e,d=(e,t)=>{let{container:r,direction:i,spacing:s,wrap:n,size:l}=e,h={root:["root",r&&"container","wrap"!==n&&`wrap-xs-${String(n)}`,...T(i),...I(l),...r?R(s,t.breakpoints.keys[0]):[]]};return(0,a.A)(h,e=>(0,o.Ay)(u,e),{})};function p(e,t,r=()=>!0){let i={};return null===e||(Array.isArray(e)?e.forEach((e,s)=>{null!==e&&r(e)&&t.keys[s]&&(i[t.keys[s]]=e)}):"object"==typeof e?Object.keys(e).forEach(t=>{let s=e[t];null!=s&&r(s)&&(i[t]=s)}):i[t.keys[0]]=e),i}let f=t(S,w,E,v,k,C,y),_=i.forwardRef(function(e,t){let o=l(),a=r(e),u=(0,c.A)(a);!function(e,t){let r=[];void 0!==e.item&&(delete e.item,r.push("item")),void 0!==e.zeroMinWidth&&(delete e.zeroMinWidth,r.push("zeroMinWidth")),t.keys.forEach(t=>{void 0!==e[t]&&(r.push(t),delete e[t])})}(u,o.breakpoints);let{className:h,children:_,columns:g=12,container:m=!1,component:b="div",direction:v="row",wrap:y="wrap",size:S={},offset:E={},spacing:w=0,rowSpacing:k=w,columnSpacing:C=w,unstable_level:I=0,...R}=u,T=p(S,o.breakpoints,e=>!1!==e),A=p(E,o.breakpoints),O=e.columns??(I?void 0:g),L=e.spacing??(I?void 0:w),P=e.rowSpacing??e.spacing??(I?void 0:k),D=e.columnSpacing??e.spacing??(I?void 0:C),M={...u,level:I,columns:O,container:m,direction:v,wrap:y,spacing:L,rowSpacing:P,columnSpacing:D,size:T,offset:A},N=d(M,o);return(0,x.jsx)(f,{ref:t,as:b,ownerState:M,className:(0,s.A)(N.root,h),...R,children:i.Children.map(_,e=>i.isValidElement(e)&&(0,n.A)(e,["Grid"])&&m&&e.props.container?i.cloneElement(e,{unstable_level:e.props?.unstable_level??I+1}):e)})});return _.muiName="Grid",_}({createStyledComponent:(0,P.Ay)("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.container&&t.container]}}),componentName:"MuiGrid2",useThemeProps:e=>(0,D.b)({props:e,name:"MuiGrid2"}),useTheme:M.A})},32432:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(581);function s(e){let{theme:t,name:r,props:s}=e;return t&&t.components&&t.components[r]&&t.components[r].defaultProps?(0,i.A)(t.components[r].defaultProps,s):s}},41615:(e,t,r)=>{"use strict";r.d(t,{I:()=>T});var i=r(98275),s=r(60388),n=r(58444),o=r(90089),a=r(81883),l=r(37149),u=class extends o.Q{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,a.T)(),this.options.experimental_prefetchInRender||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#i=void 0;#s=void 0;#n=void 0;#o;#a;#r;#t;#l;#u;#h;#c;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#i.addObserver(this),h(this.#i,this.options)?this.#_():this.updateResult(),this.#g())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c(this.#i,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c(this.#i,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#m(),this.#b(),this.#i.removeObserver(this)}setOptions(e){let t=this.options,r=this.#i;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#i))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#v(),this.#i.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#i,observer:this});let i=this.hasListeners();i&&d(this.#i,r,this.options,t)&&this.#_(),this.updateResult(),i&&(this.#i!==r||(0,l.Eh)(this.options.enabled,this.#i)!==(0,l.Eh)(t.enabled,this.#i)||(0,l.d2)(this.options.staleTime,this.#i)!==(0,l.d2)(t.staleTime,this.#i))&&this.#y();let s=this.#S();i&&(this.#i!==r||(0,l.Eh)(this.options.enabled,this.#i)!==(0,l.Eh)(t.enabled,this.#i)||s!==this.#p)&&this.#E(s)}getOptimisticResult(e){var t,r;let i=this.#e.getQueryCache().build(this.#e,e),s=this.createResult(i,e);return t=this,r=s,(0,l.f8)(t.getCurrentResult(),r)||(this.#n=s,this.#a=this.options,this.#o=this.#i.state),s}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#i}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#_({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#_(e){this.#v();let t=this.#i.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#y(){this.#m();let e=(0,l.d2)(this.options.staleTime,this.#i);if(l.S$||this.#n.isStale||!(0,l.gn)(e))return;let t=(0,l.j3)(this.#n.dataUpdatedAt,e);this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},t+1)}#S(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#i):this.options.refetchInterval)??!1}#E(e){this.#b(),this.#p=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#i)&&(0,l.gn)(this.#p)&&0!==this.#p&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||i.m.isFocused())&&this.#_()},this.#p))}#g(){this.#y(),this.#E(this.#S())}#m(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r;let i=this.#i,s=this.options,o=this.#n,u=this.#o,c=this.#a,f=e!==i?e.state:this.#s,{state:_}=e,g={..._},m=!1;if(t._optimisticResults){let r=this.hasListeners(),o=!r&&h(e,t),a=r&&d(e,i,t,s);(o||a)&&(g={...g,...(0,n.k)(_.data,e.options)}),"isRestoring"===t._optimisticResults&&(g.fetchStatus="idle")}let{error:b,errorUpdatedAt:v,status:y}=g;r=g.data;let S=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===y){let e;o?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(e=o.data,S=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,void 0!==e&&(y="success",r=(0,l.pl)(o?.data,e,t),m=!0)}if(t.select&&void 0!==r&&!S){if(o&&r===u?.data&&t.select===this.#l)r=this.#u;else try{this.#l=t.select,r=t.select(r),r=(0,l.pl)(o?.data,r,t),this.#u=r,this.#t=null}catch(e){this.#t=e}}this.#t&&(b=this.#t,r=this.#u,v=Date.now(),y="error");let E="fetching"===g.fetchStatus,w="pending"===y,k="error"===y,C=w&&E,I=void 0!==r,R={status:y,fetchStatus:g.fetchStatus,isPending:w,isSuccess:"success"===y,isError:k,isInitialLoading:C,isLoading:C,data:r,dataUpdatedAt:g.dataUpdatedAt,error:b,errorUpdatedAt:v,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:E,isRefetching:E&&!w,isLoadingError:k&&!I,isPaused:"paused"===g.fetchStatus,isPlaceholderData:m,isRefetchError:k&&I,isStale:p(e,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===R.status?e.reject(R.error):void 0!==R.data&&e.resolve(R.data)},r=()=>{t(this.#r=R.promise=(0,a.T)())},s=this.#r;switch(s.status){case"pending":e.queryHash===i.queryHash&&t(s);break;case"fulfilled":("error"===R.status||R.data!==s.value)&&r();break;case"rejected":("error"!==R.status||R.error!==s.reason)&&r()}}return R}updateResult(){let e=this.#n,t=this.createResult(this.#i,this.options);this.#o=this.#i.state,this.#a=this.options,void 0!==this.#o.data&&(this.#h=this.#i),!(0,l.f8)(t,e)&&(this.#n=t,this.#w({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let i=new Set(r??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(t=>this.#n[t]!==e[t]&&i.has(t))})()}))}#v(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#i)return;let t=this.#i;this.#i=e,this.#s=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#g()}#w(e){s.jG.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#i,type:"observerResultsUpdated"})})}};function h(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&c(e,t,t.refetchOnMount)}function c(e,t,r){if(!1!==(0,l.Eh)(t.enabled,e)){let i="function"==typeof r?r(e):r;return"always"===i||!1!==i&&p(e,t)}return!1}function d(e,t,r,i){return(e!==t||!1===(0,l.Eh)(i.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var f=r(14232),_=r(67768);r(37876);var g=f.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),m=()=>f.useContext(g);function b(){}var v=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},y=e=>{f.useEffect(()=>{e.clearReset()},[e])},S=({result:e,errorResetBoundary:t,throwOnError:r,query:i,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(s&&void 0===e.data||function(e,t){return"function"==typeof e?e(...t):!!e}(r,[e.error,i])),E=f.createContext(!1),w=()=>f.useContext(E);E.Provider;var k=e=>{let t=e.staleTime;e.suspense&&(e.staleTime="function"==typeof t?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3)))},C=(e,t)=>e.isLoading&&e.isFetching&&!t,I=(e,t)=>e?.suspense&&t.isPending,R=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function T(e,t){return function(e,t,r){let i=(0,_.jE)(r),n=w(),o=m(),a=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=n?"isRestoring":"optimistic",k(a),v(a,o),y(o);let u=!i.getQueryCache().get(a.queryHash),[h]=f.useState(()=>new t(i,a)),c=h.getOptimisticResult(a),d=!n&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=d?h.subscribe(s.jG.batchCalls(e)):b;return h.updateResult(),t},[h,d]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),f.useEffect(()=>{h.setOptions(a)},[a,h]),I(a,c))throw R(a,h,o);if(S({result:c,errorResetBoundary:o,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(a,c),a.experimental_prefetchInRender&&!l.S$&&C(c,n)){let e=u?R(a,h,o):i.getQueryCache().get(a.queryHash)?.promise;e?.catch(b).finally(()=>{h.updateResult()})}return a.notifyOnChangeProps?c:h.trackResult(c)}(e,u,t)}},42200:(e,t,r)=>{"use strict";r.d(t,{tG:()=>c});var i=r(99542);let s=Symbol("RESET"),n=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),o=new WeakMap,a=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),l=new WeakMap,u=e=>"function"==typeof(null==e?void 0:e.then),h=function(e=()=>{try{return window.localStorage}catch(e){"undefined"!=typeof window&&console.warn(e);return}},t){var r;let i,s,n;let o={getItem:(t,r)=>{var n,o;let a=e=>{if(i!==(e=e||"")){try{s=JSON.parse(e,void 0)}catch(e){return r}i=e}return s},l=null!=(o=null==(n=e())?void 0:n.getItem(t))?o:null;return u(l)?l.then(a):a(l)},setItem:(t,r)=>{var i;return null==(i=e())?void 0:i.setItem(t,JSON.stringify(r,void 0))},removeItem:t=>{var r;return null==(r=e())?void 0:r.removeItem(t)}};try{n=null==(r=e())?void 0:r.subscribe}catch(e){}if(!n&&"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.Storage&&(n=(t,r)=>{if(!(e()instanceof window.Storage))return()=>{};let i=i=>{i.storageArea===e()&&i.key===t&&r(i.newValue)};return window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}}),n){let e;e=n,o.subscribe=(t,r,i)=>e(t,e=>{let t;try{t=JSON.parse(e||"")}catch(e){t=i}r(t)})}return o}();function c(e,t,r=h,n){let o=null==n?void 0:n.getOnInit,a=(0,i.eU)(o?r.getItem(e,t):t);return a.debugPrivate=!0,a.onMount=i=>{let s;return i(r.getItem(e,t)),r.subscribe&&(s=r.subscribe(e,i,t)),s},(0,i.eU)(e=>e(a),(i,n,o)=>{let l="function"==typeof o?o(i(a)):o;return l===s?(n(a,t),r.removeItem(e)):l instanceof Promise?l.then(t=>(n(a,t),r.setItem(e,t))):(n(a,l),r.setItem(e,l))})}let d=new WeakMap,p=(e,t,r)=>(t.has(r)?t:t.set(r,e())).get(r),f=new WeakMap},77328:(e,t,r)=>{e.exports=r(89836)},80703:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>T,Dp:()=>A,o:()=>x});let i="8.55.0",s=globalThis;function n(e,t,r){let n=r||s,o=n.__SENTRY__=n.__SENTRY__||{},a=o[i]=o[i]||{};return a[e]||(a[e]=t())}function o(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||i,t[i]=t[i]||{}}function a(){return Date.now()/1e3}let l=function(){let{performance:e}=s;if(!e||!e.now)return a;let t=Date.now()-e.now(),r=void 0==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/1e3}();function u(){let e=s.crypto||s.msCrypto,t=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{let t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}(()=>{let{performance:e}=s;if(!e||!e.now)return;let t=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+t-r):36e5,n=e.timing&&e.timing.navigationStart,o="number"==typeof n?Math.abs(n+t-r):36e5;if(i<36e5||o<36e5)return i<=o?e.timeOrigin:void 0})();let h=Object.prototype.toString,c="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,d=["debug","info","warn","error","log","assert","trace"],p={},f=n("logger",function(){let e=!1,t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return c?d.forEach(r=>{t[r]=(...t)=>{e&&function(e){if(!("console"in s))return e();let t=s.console,r={},i=Object.keys(p);i.forEach(e=>{let i=p[e];r[e]=t[e],t[e]=i});try{return e()}finally{i.forEach(e=>{t[e]=r[e]})}}(()=>{s.console[r](`Sentry Logger [${r}]:`,...t)})}}):d.forEach(e=>{t[e]=()=>void 0}),t});function _(){return u().substring(16)}let g="_sentrySpan";function m(e,t){t?function(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){c&&f.log(`Failed to add non-enumerable property "${t}" to object`,e)}}(e,g,t):delete e[g]}class b{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:u(),spanId:_()}}clone(){let e=new b;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,m(e,this[g]),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(e,t={}){if(!t.user||(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||l(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:u()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{let t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){var t;if(!e)return this;let r="function"==typeof e?e(this):e,[i,s]=r instanceof v?[r.getScopeData(),r.getRequestSession()]:(t=r,"[object Object]"===h.call(t))?[e,e.requestSession]:[],{tags:n,extra:o,user:a,contexts:l,level:u,fingerprint:c=[],propagationContext:d}=i||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),c.length&&(this._fingerprint=c),d&&(this._propagationContext=d),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,m(this,void 0),this._attachments=[],this.setPropagationContext({traceId:u()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){let r="number"==typeof t?t:100;if(r<=0)return this;let i={timestamp:a(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:this[g]}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=function e(t,r,i=2){if(!r||"object"!=typeof r||i<=0)return r;if(t&&r&&0===Object.keys(r).length)return t;let s={...t};for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=e(s[t],r[t],i-1));return s}(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:_(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){let r=t&&t.event_id?t.event_id:u();if(!this._client)return f.warn("No client configured on scope - will not capture exception!"),r;let i=Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:r},this),r}captureMessage(e,t,r){let i=r&&r.event_id?r.event_id:u();if(!this._client)return f.warn("No client configured on scope - will not capture message!"),i;let s=Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,t){let r=t&&t.event_id?t.event_id:u();return this._client?this._client.captureEvent(e,{...t,event_id:r},this):f.warn("No client configured on scope - will not capture event!"),r}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}let v=b;class y{constructor(e,t){let r,i;r=e||new v,i=t||new v,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){var t;let r;let i=this._pushScope();try{r=e(i)}catch(e){throw this._popScope(),e}return(t=r)&&t.then&&"function"==typeof t.then?r.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function S(){let e=(o(s),s),t=o(e);return t.stack=t.stack||new y(n("defaultCurrentScope",()=>new v),n("defaultIsolationScope",()=>new v))}function E(e){return S().withScope(e)}function w(e,t){let r=S();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function k(e){return S().withScope(()=>e(S().getIsolationScope()))}function C(e){let t=o(e);return t.acs?t.acs:{withIsolationScope:k,withScope:E,withSetScope:w,withSetIsolationScope:(e,t)=>k(t),getCurrentScope:()=>S().getScope(),getIsolationScope:()=>S().getIsolationScope()}}function I(){return C((o(s),s)).getCurrentScope()}let R=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function T(e,t){var r;return I().captureException(e,t?(r=t)instanceof v||"function"==typeof r||Object.keys(t).some(e=>R.includes(e))?{captureContext:t}:t:void 0)}function x(e,t){C((o(s),s)).getIsolationScope().setContext(e,t)}function A(){return!!I().getClient()}},85278:(e,t,r)=>{"use strict";r.d(t,{Xr:()=>p,fp:()=>f,md:()=>d});var i=r(14232),s=r(99542);let n=(0,i.createContext)(void 0),o=e=>{let t=(0,i.useContext)(n);return(null==e?void 0:e.store)||t||(0,s.zp)()},a=e=>"function"==typeof(null==e?void 0:e.then),l=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},u=i.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw l(e),e}),h=new WeakMap,c=e=>{let t=h.get(e);return t||(t=new Promise((r,i)=>{let s=e,n=e=>t=>{s===e&&r(t)},o=e=>t=>{s===e&&i(t)},l=e=>{"onCancel"in e&&"function"==typeof e.onCancel&&e.onCancel(i=>{if(i===e)throw Error("[Bug] p is not updated even after cancelation");a(i)?(h.set(i,t),s=i,i.then(n(i),o(i)),l(i)):r(i)})};e.then(n(e),o(e)),l(e)}),h.set(e,t)),t};function d(e,t){let r=o(t),[[s,n,h],d]=(0,i.useReducer)(t=>{let i=r.get(e);return Object.is(t[0],i)&&t[1]===r&&t[2]===e?t:[i,r,e]},void 0,()=>[r.get(e),r,e]),p=s;(n!==r||h!==e)&&(d(),p=r.get(e));let f=null==t?void 0:t.delay;return((0,i.useEffect)(()=>{let t=r.sub(e,()=>{if("number"==typeof f){let t=r.get(e);a(t)&&l(c(t)),setTimeout(d,f);return}d()});return d(),t},[r,e,f]),(0,i.useDebugValue)(p),a(p))?u(c(p)):p}function p(e,t){let r=o(t);return(0,i.useCallback)((...t)=>{if(!("write"in e))throw Error("not writable atom");return r.set(e,...t)},[r,e])}function f(e,t){return[d(e,t),p(e,t)]}},99523:(e,t,r)=>{"use strict";let i,s;r.d(t,{P2:()=>d});let n=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,a=new WeakMap,l=new WeakMap,u={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",n)},s=()=>{t(h(e.result)),i()},n=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",n)});return l.set(t,e),t}(e);if(a.has(e))return a.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(c(this),t),h(this.request)}:function(...t){return h(e.apply(c(this),t))};return(e instanceof IDBTransaction&&function(e){if(o.has(e))return;let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",n),e.removeEventListener("abort",n)},s=()=>{t(),i()},n=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",n),e.addEventListener("abort",n)});o.set(e,t)}(e),n(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,u):e}(e);return t!==e&&(a.set(e,t),l.set(t,e)),t}let c=e=>l.get(e);function d(e,t,{blocked:r,upgrade:i,blocking:s,terminated:n}={}){let o=indexedDB.open(e,t),a=h(o);return i&&o.addEventListener("upgradeneeded",e=>{i(h(o.result),e.oldVersion,e.newVersion,h(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),a.then(e=>{n&&e.addEventListener("close",()=>n()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}let p=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],_=new Map;function g(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(_.get(t))return _.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,s=f.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||p.includes(r)))return;let n=async function(e,...t){let n=this.transaction(e,s?"readwrite":"readonly"),o=n.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),s&&n.done]))[0]};return _.set(t,n),n}u=(e=>({...e,get:(t,r,i)=>g(t,r)||e.get(t,r,i),has:(t,r)=>!!g(t,r)||e.has(t,r)}))(u);let m=["continue","continuePrimaryKey","advance"],b={},v=new WeakMap,y=new WeakMap,S={get(e,t){if(!m.includes(t))return e[t];let r=b[t];return r||(r=b[t]=function(...e){v.set(this,y.get(this)[t](...e))}),r}};async function*E(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let r=new Proxy(t,S);for(y.set(r,t),l.set(r,c(t));t;)yield r,t=await (v.get(r)||t.continue()),v.delete(r)}function w(e,t){return t===Symbol.asyncIterator&&n(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&n(e,[IDBIndex,IDBObjectStore])}u=(e=>({...e,get:(t,r,i)=>w(t,r)?E:e.get(t,r,i),has:(t,r)=>w(t,r)||e.has(t,r)}))(u)},99542:(e,t,r)=>{"use strict";let i;r.d(t,{eU:()=>n,zp:()=>x});let s=0;function n(e,t){let r=`atom${++s}`,i={toString(){return this.debugLabel?r+":"+this.debugLabel:r}};return"function"==typeof e?i.read=e:(i.init=e,i.read=o,i.write=a),t&&(i.write=t),i}function o(e){return e(this)}function a(e,t,r){return t(this,"function"==typeof r?r(e(this)):r)}let l=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,u=e=>"init"in e,h=e=>!!e.write,c=new WeakMap,d=e=>{var t;return _(e)&&!(null==(t=c.get(e))?void 0:t[1])},p=(e,t)=>{let r=c.get(e);if(r)r[1]=!0,r[0].forEach(e=>e(t));else throw Error("[Bug] cancelable promise not found")},f=e=>{if(c.has(e))return;let t=[new Set,!1];c.set(e,t);let r=()=>{t[1]=!0};e.then(r,r),e.onCancel=e=>{t[0].add(e)}},_=e=>"function"==typeof(null==e?void 0:e.then),g=e=>"v"in e||"e"in e,m=e=>{if("e"in e)throw e.e;if(!("v"in e))throw Error("[Bug] atom state is not initialized");return e.v},b=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},v=(e,t,r,i,s)=>{var n;if(i===t)throw Error("[Bug] atom cannot depend on itself");r.d.set(i,s.n),d(r.v)&&b(t,r.v,s),null==(n=s.m)||n.t.add(t),e&&w(e,i,t)},y=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),S=(e,t,r)=>{e[t].add(r)},E=(e,t,r)=>{e.D.has(t)||(e.D.set(t,new Set),S(e,"M",()=>{var t;null==(t=r.m)||t.l.forEach(t=>S(e,"M",t))}))},w=(e,t,r)=>{let i=e.D.get(t);i&&i.add(r)},k=(e,t)=>e.D.get(t),C=e=>{let t;let r=!1,i=e=>{try{e()}catch(e){r||(t=e,r=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(r)throw t},I=(...[e,t,r,i])=>{let s=(t,r,i)=>{let s="v"in r,n=r.v,o=d(r.v)?r.v:null;if(_(i)){for(let s of(f(i),r.d.keys()))b(t,i,e(s));r.v=i}else r.v=i;delete r.e,delete r.x,s&&Object.is(n,r.v)||(++r.n,o&&p(o,i))},n=(r,i)=>{var o;let a,c;let d=e(i);if(g(d)&&(d.m&&!d.x||Array.from(d.d).every(([e,t])=>n(r,e).n===t)))return d;d.d.clear();let p=!0;try{let f=t(i,t=>{if(l(i,t)){let r=e(t);if(!g(r)){if(u(t))s(t,r,t.init);else throw Error("no atom init")}return m(r)}let o=n(r,t);try{return m(o)}finally{if(p)v(r,i,d,t,o);else{let e=y();v(e,i,d,t,o),R(e,i,d),C(e)}}},{get signal(){return a||(a=new AbortController),a.signal},get setSelf(){return h(i)||console.warn("setSelf function cannot be used with read-only atom"),!c&&h(i)&&(c=(...e)=>{if(p&&console.warn("setSelf function cannot be called in sync"),!p)return w(i,...e)}),c}});if(s(i,d,f),_(f)){null==(o=f.onCancel)||o.call(f,()=>null==a?void 0:a.abort());let e=()=>{if(d.m){let e=y();R(e,i,d),C(e)}};f.then(e,e)}return d}catch(e){return delete d.v,d.e=e,delete d.x,++d.n,d}finally{p=!1}},o=(t,r,i)=>{var s,n;let o=new Map;for(let t of(null==(s=i.m)?void 0:s.t)||[]){let r=e(t);r.m&&o.set(t,r)}for(let t of i.p)o.set(t,e(t));return null==(n=k(t,r))||n.forEach(t=>{o.set(t,e(t))}),o},a=(e,t,r)=>{let i=[],s=new Set,a=new Set,l=[[t,r]];for(;l.length>0;){let[t,r]=l[l.length-1];if(a.has(t)){l.pop();continue}if(s.has(t)){i.push([t,r,r.n]),a.add(t),r.x=!0,l.pop();continue}for(let[i,n]of(s.add(t),o(e,t,r)))t===i||s.has(i)||l.push([i,n])}S(e,"H",()=>{let r=new Set([t]);for(let t=i.length-1;t>=0;--t){let[s,o,a]=i[t],l=!1;for(let e of o.d.keys())if(e!==s&&r.has(e)){l=!0;break}l&&(n(e,s),R(e,s,o),a!==o.n&&(E(e,s,o),r.add(s))),delete o.x}})},c=(t,i,...o)=>{let h=!0;try{return r(i,e=>m(n(t,e)),(r,...n)=>{let o=e(r);try{if(!l(i,r))return c(t,r,...n);{if(!u(r))throw Error("atom not writable");let e=o.n,i=n[0];s(r,o,i),R(t,r,o),e!==o.n&&(E(t,r,o),a(t,r,o));return}}finally{h||C(t)}},...o)}finally{h=!1}},w=(e,...t)=>{let r=y();try{return c(r,e,...t)}finally{C(r)}},R=(t,r,i)=>{if(i.m&&!d(i.v)){for(let s of i.d.keys())i.m.d.has(s)||(T(t,s,e(s)).t.add(r),i.m.d.add(s));for(let s of i.m.d||[])if(!i.d.has(s)){i.m.d.delete(s);let n=x(t,s,e(s));null==n||n.t.delete(r)}}},T=(t,r,s)=>{if(!s.m){for(let i of(n(t,r),s.d.keys()))T(t,i,e(i)).t.add(r);if(s.m={l:new Set,d:new Set(s.d.keys()),t:new Set},h(r)){let e;let n=s.m,o=(t,i)=>{let s=!0;e=(...e)=>{try{return c(t,r,...e)}finally{s||C(t)}};try{return i()}finally{s=!1}};S(t,"L",()=>{let s=o(t,()=>i(r,(...t)=>e(...t)));s&&(n.u=e=>o(e,s))})}}return s.m},x=(t,r,i)=>{if(i.m&&!i.m.l.size&&!Array.from(i.m.t).some(t=>{var i;return null==(i=e(t).m)?void 0:i.d.has(r)})){let s=i.m.u;for(let n of(s&&S(t,"L",()=>s(t)),delete i.m,i.d.keys())){let i=x(t,n,e(n));null==i||i.t.delete(r)}return}return i.m};return{get:e=>m(n(void 0,e)),set:w,sub:(t,r)=>{let i=y(),s=e(t),n=T(i,t,s).l;return n.add(r),C(i),()=>{n.delete(r);let e=y();x(e,t,s),C(e)}},unstable_derive:s=>I(...s(e,t,r,i))}},R=e=>{let t;let r=new WeakMap,i=new Set,s=0,n=e.unstable_derive((e,n,o,a)=>(t=e,[t=>{let s=r.get(t);return s||(s=new Proxy(e(t),{set:(e,r,s)=>("m"===r&&i.add(t),Reflect.set(e,r,s)),deleteProperty:(e,r)=>("m"===r&&i.delete(t),Reflect.deleteProperty(e,r))}),r.set(t,s)),s},n,(e,t,r,...i)=>s?r(e,...i):o(e,t,r,...i),a])),o=n.set;return Object.assign(n,{dev4_get_internal_weak_map:()=>({get:e=>{let r=t(e);if(0!==r.n)return r}}),dev4_get_mounted_atoms:()=>i,dev4_restore_atoms:e=>{o({read:()=>null,write:(t,r)=>{++s;try{for(let[t,i]of e)u(t)&&r(t,i)}finally{--s}}})}})},T=()=>{let e=new WeakMap;return R(I(t=>{if(!t)throw Error("Atom is undefined or null");let r=e.get(t);return r||(r={d:new Map,p:new Set,n:0},e.set(t,r)),r},(e,...t)=>e.read(...t),(e,...t)=>e.write(...t),(e,...t)=>{var r;return null==(r=e.onMount)?void 0:r.call(e,...t)}))},x=()=>(!i&&(i=T(),globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=i),globalThis.__JOTAI_DEFAULT_STORE__!==i&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044")),i)}}]);